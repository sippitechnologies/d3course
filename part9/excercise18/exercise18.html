<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scale with Bar</title>
    <script src='https://d3js.org/d3.v7.min.js'></script>
</head>
<body>
<script>
  let csvFile = "./data/citiespopulation.csv";

let values = d3.csv(csvFile,function(data){
  return data;
});

console.log(values);


const width = 500;
const barHeight = 20;
const margin = 1;
values.then((data)=>{
  var scale = d3.scaleLinear()
 .domain([d3.min(data,d=>d.price), d3.max(data,d=>d.price)])
 .range([50, 500]);
var svg = d3.select("body")
 .append("svg")
 .attr("width", width)
 .attr("height", barHeight * data.length);
var g = svg.selectAll("g")
 .data(data)
 .enter()
 .append("g")
 .attr("transform", function (d, i) {
 return "translate(0," + i * barHeight + ")";
 });
g.append("rect")
 .attr("width", function (d) {
 return scale(d.price);
 })
 .attr('fill', (d)=>{
     if(d.price<100)
     {
       return 'green'
     }
     else if(d>500)
     {
        return "red"
     }
     else{
    return 'blue'}})
 .attr("height", barHeight - margin)
g.append("text")
 .attr("x", function (d) { return (scale(d.price)); })
 .attr("y", barHeight / 2)
 .attr("dy", ".35em")
 .style('text-anchor', 'end')
 .text(function (d) { return d.price; });

})



</script>
</body>
</html>